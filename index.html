<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>MONET — Video + PDF Downloads</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="noindex, nofollow" />

  <!-- ===================== CONFIG (filled for you) ===================== -->
  <script>
    window.__CFG__ = {
      GA4_MEASUREMENT_ID: "G-YH7PR2KMK8",       // your GA4 ID
      GTM_CONTAINER_ID  : "",                   // optional: add if/when you move to GTM
      CONSENT_REGION    : "us",                 // switch to "eea" for stricter defaults
      CROSS_DOMAIN_HOSTS: [],
      MP_ENDPOINT       : "",
      UTM_DEFAULTS      : {
        utm_source  : "qr",
        utm_medium  : "github_pages",
        utm_campaign: "monet",
        utm_content : "redirect"
      }
    };
  </script>

  <style>
    :root{ --bg:#0b0c10; --panel:#0d111a; --ink:#e8eaed; --muted:#9aa0a6; --stroke:#1e2330; --accent:#ffc81a; }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);
      font:15px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial}
    .wrap{min-height:100%;display:grid;grid-template-rows:auto 1fr auto;gap:16px;max-width:1200px;margin:0 auto;padding:16px}
    header{display:flex;align-items:center;justify-content:space-between;padding-bottom:8px;border-bottom:1px solid var(--stroke)}
    h1{margin:0;font-size:18px;font-weight:700}
    .intro{font-size:13px;color:var(--muted);margin:8px 0 0}
    .grid{display:grid;grid-template-columns:1fr 1.2fr;gap:16px}
    @media (max-width:980px){.grid{grid-template-columns:1fr}}
    .card{background:var(--panel);border:1px solid var(--stroke);border-radius:14px;overflow:hidden}
    .card .head{display:flex;align-items:center;justify-content:space-between;padding:12px;border-bottom:1px solid var(--stroke)}
    .frame{position:relative;aspect-ratio:16/9;width:100%;background:#000}
    .frame>iframe{position:absolute;inset:0;border:0;width:100%;height:100%}
    .list{padding:12px;display:grid;gap:12px}
    .item{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;border:1px solid var(--stroke);border-radius:12px;padding:10px}
    .item h3{margin:0;font-size:14px}
    .item p{margin:0;font-size:12px;color:var(--muted)}
    .btn{appearance:none;border:1px solid var(--stroke);background:linear-gradient(180deg,#0f1320,#0b0f1b);
         color:var(--ink);padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:600;text-decoration:none}
    .btn:hover{border-color:var(--accent)}
    .muted{color:var(--muted)}
    footer{display:flex;justify-content:flex-end;padding-top:8px;border-top:1px solid var(--stroke)}
    .consent{position:fixed;inset:auto 12px 12px 12px;background:var(--panel);border:1px solid var(--stroke);
      border-radius:12px;padding:12px;display:none;gap:8px;align-items:center;z-index:9999}
    .consent.show{display:flex}
    .consent button{margin-left:auto}
  </style>

  <!-- gtag/GTM loader + Consent Mode v2 defaults -->
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }

    const region = (window.__CFG__||{}).CONSENT_REGION || "us";
    const defaults = (region === "eea")
      ? {ad_storage:"denied", analytics_storage:"denied", ad_user_data:"denied", ad_personalization:"denied"}
      : {ad_storage:"granted", analytics_storage:"granted", ad_user_data:"granted", ad_personalization:"granted"};
    gtag('consent','default',defaults);

    document.addEventListener('DOMContentLoaded', () => {
      const key = 'monet-consent';
      const saved = localStorage.getItem(key);
      if (!saved) document.querySelector('.consent')?.classList.add('show');
      function setConsent(granted){
        localStorage.setItem(key, granted?'granted':'denied');
        gtag('consent','update',{
          ad_storage: granted?'granted':'denied',
          analytics_storage: granted?'granted':'denied',
          ad_user_data: granted?'granted':'denied',
          ad_personalization: granted?'granted':'denied'
        });
        document.querySelector('.consent')?.classList.remove('show');
      }
      window.__acceptConsent=()=>setConsent(true);
      window.__denyConsent=()=>setConsent(false);
    });

    (function loadTags(){
      const { GA4_MEASUREMENT_ID, GTM_CONTAINER_ID } = window.__CFG__ || {};
      if (GTM_CONTAINER_ID) {
        const s = document.createElement('script');
        s.async = true;
        s.src = `https://www.googletagmanager.com/gtm.js?id=${encodeURIComponent(GTM_CONTAINER_ID)}`;
        document.head.appendChild(s);
      } else if (GA4_MEASUREMENT_ID) {
        const s1 = document.createElement('script');
        s1.async = true;
        s1.src = "https://www.googletagmanager.com/gtag/js?id=" + encodeURIComponent(GA4_MEASUREMENT_ID);
        document.head.appendChild(s1);
        gtag('js', new Date());
        const domains = (window.__CFG__||{}).CROSS_DOMAIN_HOSTS || [];
        gtag('config', GA4_MEASUREMENT_ID, { linker:{domains}, send_page_view:true });
      }
    })();
  </script>
</head>

<body>
  <noscript>
    <iframe src="" height="0" width="0" style="display:none;visibility:hidden" id="gtm-noscript"></iframe>
    <script>
      (function(){
        const id = (window.__CFG__||{}).GTM_CONTAINER_ID;
        if (!id) return;
        document.getElementById('gtm-noscript').src =
          "https://www.googletagmanager.com/ns.html?id="+encodeURIComponent(id);
      })();
    </script>
  </noscript>

  <div class="wrap">
    <header>
      <div>
        <h1>MONET — Video & PDF Downloads</h1>
        <p class="intro">
          Posterior lumbar interbody fusion system with streamlined workflow and stable construct options.
          Use the downloads for a quick overview and the full Surgical Technique Guide.
        </p>
      </div>
    </header>

    <div class="grid" id="mainGrid">
      <!-- LEFT: YouTube -->
      <section class="card" aria-label="Video" id="videoCard">
        <div class="head"><h2 style="margin:0;font-size:14px">MONET — TRAINING VIDEO</h2></div>
        <div class="frame">
          <iframe id="yt" src="" title="YouTube video player"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        </div>
      </section>

      <!-- RIGHT: Release-based Downloads -->
      <section class="card" aria-label="Documents">
        <div class="head"><h2 style="margin:0;font-size:14px">PDF Downloads</h2></div>
        <div id="docList" class="list" aria-live="polite"></div>

        <div style="padding:12px;display:flex;justify-content:flex-end">
          <a id="redirectBtn" class="btn"
             href="https://zaq.jby.mybluehost.me/monet/"
             rel="noopener">Go to Monet Website →</a>
        </div>
      </section>
    </div>

    <footer><span class="muted">Files served from GitHub Releases.</span></footer>
  </div>

  <!-- Minimal consent banner -->
  <div class="consent" role="dialog" aria-live="polite" aria-label="Analytics consent">
    <span>Allow analytics cookies for improved measurement?</span>
    <button class="btn" onclick="__denyConsent()">No</button>
    <button class="btn" onclick="__acceptConsent()">Yes</button>
  </div>

  <script>
    /* ============================= CONTENT CONFIG ============================= */
    const YT_ID      = "wrjK2Ob6EQk"; // set "" to hide video card
    const OWNER_REPO = "ctlamedicamarketing/monet-training-10-31-25";
    const TAG        = "monet-1.1";

    // Exact filenames from the release assets
    const DOCS = [
      {
        label: "MONET — Surgical Technique Guide (Rev J) — STG.113.001",
        file : "STG.113.001.-.MONET.STG.Rev.J.pdf",
        desc : "Complete technique steps, instrumentation, and intraoperative guidance."
      },
      {
        label: "NITRO — Surgical Technique Guide (Rev D) — STG.213.002",
        file : "STG.213.002.-.MONET.NITRO.STG.-.REV.D.pdf",
        desc : "NITRO adjunct guide (latest revision from the Monet training release)."
      }
    ];
    /* =========================== END CONTENT CONFIG =========================== */

    const releaseUrl = (file) =>
      `https://github.com/${OWNER_REPO}/releases/download/${encodeURIComponent(TAG)}/${encodeURIComponent(file)}`;

    function withUTMs(url){
      const cfg = (window.__CFG__||{}).UTM_DEFAULTS || {};
      const u = new URL(url, location.href);
      for (const [k,v] of Object.entries(cfg)) if (!u.searchParams.has(k)) u.searchParams.set(k, v);
      return u.toString();
    }
    function isOutbound(href){
      try{ const u = new URL(href, location.href); return u.hostname !== location.hostname; }
      catch { return false; }
    }
    function sendEvent(name, params){
      const ep = (window.__CFG__||{}).MP_ENDPOINT || "";
      if (ep && navigator.sendBeacon) {
        try {
          navigator.sendBeacon(ep, new Blob([JSON.stringify({
            type:'client_event', name, params, ts:Date.now(), page:location.href, ua:navigator.userAgent
          })], {type:'application/json'}));
        } catch(e){}
      }
      if (typeof gtag === 'function') gtag('event', name, params || {});
      else (window.dataLayer = window.dataLayer || []).push({event:name, ...(params||{})});
    }

    (function renderDownloads(){
      const list = document.getElementById('docList');
      DOCS.forEach(d=>{
        const row = document.createElement('div'); row.className = 'item';
        const left = document.createElement('div');
        const title = document.createElement('h3'); title.textContent = d.label;
        const desc  = document.createElement('p');  desc.textContent  = d.desc || "";
        left.append(title, desc);

        const a = document.createElement('a');
        a.href = withUTMs(releaseUrl(d.file));
        a.className = 'btn'; a.download = d.file; a.rel = 'noopener'; a.textContent = 'Download';
        a.addEventListener('click', ()=>{
          sendEvent('file_download', { slug:'monet', file_name:d.file, content_type:'pdf', link_url:a.href });
        });

        row.append(left, a); list.appendChild(row);
      });
    })();

    (function initYouTube(){
      const card = document.getElementById('videoCard');
      if (!YT_ID) { card.remove(); return; }
      const yt = document.getElementById('yt');
      const params = new URLSearchParams({ autoplay:'0', controls:'1', modestbranding:'1', rel:'0', playsinline:'1' });
      yt.src = `https://www.youtube.com/embed/${encodeURIComponent(YT_ID)}?` + params.toString();
    })();

    (function qrScanBoot(){
      const slug = 'monet';
      const q = new URLSearchParams(location.search);
      const utms = {};
      ['utm_source','utm_medium','utm_campaign','utm_content','utm_term'].forEach(k=>{
        const v = q.get(k) || (window.__CFG__.UTM_DEFAULTS||{})[k]; if (v) utms[k]=v;
      });
      sendEvent('qr_scan', { slug, page_location: location.href, ...utms });
    })();

    (function initRedirectBtn(){
      const btn = document.getElementById('redirectBtn');
      if (!btn) return;
      btn.href = withUTMs(btn.href);
      btn.addEventListener('click', ()=>{
        sendEvent('redirect_click', { slug:'monet', link_url: btn.href });
      });
    })();

    document.addEventListener('click', (e)=>{
      const a = e.target.closest('a[href]'); if (!a) return;
      if (isOutbound(a.href)) {
        sendEvent('click_outbound', { link_url:a.href, link_text:(a.textContent||'').trim().slice(0,120) });
      }
    });
  </script>
</body>
</html>
